<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../app-layout/app-scroll-effects/app-scroll-effects-behavior.html">

<script>

Polymer.AppLayout.registerEffect('hide-title', {
  setUp: function(config) {
    // the effect's config is passed to the setUp.
    this.navContainer = { navElement: Polymer.dom(this).querySelector('[nav-container]') };
    this.navContainer.navHeight = parseInt(getComputedStyle(this.navContainer.navElement).height, 10);
    this.navContainer.navElement.style.willChange = 'transform';
    this.headerContainer = { headerElement: Polymer.dom(this).querySelector('[header-container]') };
    this.headerContainer.headerHeight = parseInt(getComputedStyle(this.headerContainer.headerElement).height, 10);
    // this.headerContainer.headerElement.style.willChange = 'transform, opacity';
  },

  run: function(progress) {
    let dy = ((this.navContainer.navHeight - this.headerContainer.headerHeight + 5) * progress);
    this.transform(`translateY(${dy}px)`, this.navContainer.navElement);
  },

  tearDown: function() {
     // clean up and reset of states
     this.navContainer.navElement.style.willChange = "auto";
     delete this.navContainer;
  }
});
</script>
